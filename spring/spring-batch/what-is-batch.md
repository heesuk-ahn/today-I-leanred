# Spring batch 란?

## Spring Batch Overview

* 배치(Batch) 는 __일괄처리__ 라는 뜻을 갖고 있다.
* 배피 어플리케이션이 언제 필요한지에 대해서 상황을 생각해보자
  * 매일 전 날의 데이터를 집계한다고 가정을 하자.
  * 이 집계 과정은 어디서 수행해야 할까?
  * API Server 로 생각을 하면, spring boot 등을 띄워서 앱을 만드는 것을 생각할 수 도 있다.
  * 하지만, 보통 `데이터 집계` 측면에서는 __큰 데이터를 읽고 (Read), 가공하고 (Process), 적재 (Load)__ 한다면
  해당 서버는 순식간에 CPU, I/O 등의 자원을 다 써버려서 다른 reqeust를 처리할 수 없게된다.
  * 그리고 이 집계 과정은 __하루 1번__ 수행될 뿐이다.
  * 이를 위해서 API Server 를 만드는 것은 사실상 API Server 의 용도와는 맞지 않을 수 있다.
  * 또, 만약에 __집계 처리중 서버가 중단 되는 경우를 생각해보자__
  * 5만번 째에서 실패했다면, 5만 1번째부터 다시 시작한다면 좋지 않을까?
  * 또 누군가 아침에 `집계 Task` 를 수행하였는데, 누군가 실수로 `한번 더` 실행한다면 집계 데이터가 2배로
  뻥튀기 될 수도 있다.
  * 만약 이미 그날 수행을 한 Job 이라면, 이미 실행한 적이 있어서 Job 수행을 실패하게 지원한다면 얼마나 좋을까?  
* 위와 같은 고민에 만들어 진 것이 __단발성으로 대용량의 데이터를 처리하는 어플리케이션을 배치 어플리케이션__ 이라고 한다.
* 위에서 생각한 고민들을 생각해보면, `배치 어플리케이션을` 구성하기 위해선 비즈니스 로직 외에 부가적으로 신경써야 할 것이 많다는
것을 알 수 있다.
* 여기서 한가지 생각해 볼 것이 Spring MVC 또는 Spring boot 를 이용하여 API 서버를 개발할 때,
Spirng 에서 지원해주는 다양한 기능들을 통해서 우리는 비즈니스 로직에만 집중할 수 있었다.
* `배치 어플리케이션` 에서도 이와 같은 지원을 위해 `Spring Batch` 가 있다.
* `Spring Batch`를 소개하기 전에 배치 어플리케이션이 어떤 것인지 그 조건에 대해서 잠깐 살펴보자.
  * 대용량 데이터 : 배치 어플리케이션은 대량의 데이터를 가져오거나, 전달하거나, 계산하는 등의 처리를 할 수 있어야 한다.
  * 자동화 : 배치 어플리케이션은 심각한 문제 해결을 제외하고는 __사용자 개입 없이 실행__ 되어야 한다.
  * 견고성 : 배치 어플리케이션은 잘못된 데이터를 충돌/중단 없이 처리할 수 있어야 한다.
  * 신뢰성 : 배치 어플리케이션은 무엇이 잘못되었는지를 추적할 수 있어야 한다. (로깅, 알림)
  * 성능 : 배치 어플리케이션은 __지정한 시간 안에 처리를 완료__ 하거나 동시에 실행되는 __다른 어플리케이션을 방해하지 않도록 수행__ 되어야 한다.

### 참고

* https://jojoldu.tistory.com/324 (Spring Batch 가이드 - 배치 어플리케이션이란?)
